(function(t){function e(e){for(var s,a,i=e[0],l=e[1],c=e[2],h=0,f=[];h<i.length;h++)a=i[h],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&f.push(n[a][0]),n[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],s=!0,i=1;i<o.length;i++){var l=o[i];0!==n[l]&&(s=!1)}s&&(r.splice(e--,1),t=a(a.s=o[0]))}return t}var s={},n={app:0},r=[];function a(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=t,a.c=s,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(o,s,function(e){return t[e]}.bind(null,s));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var s=o("85ec"),n=o.n(s);n.a},"06ef":function(t,e,o){"use strict";var s=o("35f2"),n=o.n(s);n.a},1:function(t,e){},2:function(t,e){},"35f2":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var s=o("2b0e"),n=o("2222"),r=o.n(n),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"w-full h-full flex flex-col justify-between items-center overflow-hidden"},[o("div",{staticClass:"absolute flex flex-row justify-between items-center bg-white rounded-b-2xl"},[o("VHeader")],1),o("canvas",{ref:"canvas",staticClass:"w-full h-screen",style:t.cursor+t.canvasBg,attrs:{id:"canvas",resize:""}}),o("VDialogue",{ref:"sidebar",staticClass:"absolute top-1/2 left-0 transform -translate-y-2/3 transition duration-300 ease-in-out",on:{click:t.toggleSideBar}}),o("VContent",{staticClass:"absolute bottom-12"}),o("VNext",{staticClass:"absolute bottom-12 left-12"})],1)},i=[],l=(o("b680"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex items-center justify-center flex-wrap w-96 h-20"},[o("VPicker",{staticClass:"transform -translate-y-2"}),o("VTools",{staticClass:"transform -translate-y-2"})],1)}),c=[],u=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex items-center gap-x-10"},[o("v-popover",{attrs:{disabled:t.disabledSize,offset:"6"}},[o("VIconBtn",{ref:"pencil",staticClass:"transform -translate-y-5 transition duration-300 ease-in-out",attrs:{title:"画笔(P)",active:"pencil"===t.toolName,name:"pencil"},on:{click:function(e){return t.setTool("pencil")}}}),o("template",{slot:"popover"},[o("div",{staticClass:"v-size-picker"},[o("VueSlider",{attrs:{min:1},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}})],1)])],2),o("v-popover",{attrs:{disabled:t.disabledSize,offset:"6"}},[o("VIconBtn",{ref:"brush",staticClass:"transform -translate-y-5 transition duration-300 ease-in-out",attrs:{title:"刷子(B)",active:"brush"===t.toolName,name:"brush"},on:{click:function(e){return t.setTool("brush")}}}),o("template",{slot:"popover"},[o("div",{staticClass:"v-size-picker"},[o("VueSlider",{attrs:{min:1},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}})],1)])],2),o("v-popover",{attrs:{disabled:t.disabledSize,offset:"16"}},[o("VIconBtn",{attrs:{title:"擦除(E)",active:"eraser"===t.toolName,name:"eraser"},on:{click:function(e){return t.setTool("eraser")}}}),o("template",{slot:"popover"},[o("div",{staticClass:"v-size-picker"},[o("VueSlider",{attrs:{min:1},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}})],1)])],2)],1)},h=[],f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{on:{click:t.handleClick}},[o("i",[o("img",{attrs:{src:t.src,alt:t.name}})])])},d=[],p=(o("b0c0"),{props:{active:Boolean,disabled:Boolean,name:String},computed:{src:function(){return"https://raw.githubusercontent.com/chaochaooo/Bio_Sketchbook/main/public/assets/svg/"+this.name+".svg"}},methods:{handleClick:function(t){this.disabled||this.$emit("click",t)}}}),m=p,v=o("2877"),g=Object(v["a"])(m,f,d,!1,null,"6cc9eac0",null),b=g.exports,w=o("4971"),y=o.n(w),k=(o("8445"),{components:{VIconBtn:b,VueSlider:y.a},data:function(){return{size:1}},computed:{toolName:function(){return this.$store.state.toolName},toolArgs:function(){return this.$store.state[this.toolName+"Args"]||{}},disabledSize:function(){return null===this.toolName}},watch:{toolName:function(){this.toolArgs.size&&(this.size=this.toolArgs.size)},size:function(){this.toolArgs.size&&this.$store.commit("setArgs",{toolName:this.toolName,size:this.size})}},methods:{setTool:function(t){"pencil"===t?(this.$refs["brush"].$el.classList.remove("-translate-y-2"),this.$refs["brush"].$el.classList.add("-translate-y-5"),this.$refs["pencil"].$el.classList.remove("-translate-y-5"),this.$refs["pencil"].$el.classList.add("-translate-y-2")):"brush"===t&&(this.$refs["pencil"].$el.classList.remove("-translate-y-2"),this.$refs["pencil"].$el.classList.add("-translate-y-5"),this.$refs["brush"].$el.classList.remove("-translate-y-5"),this.$refs["brush"].$el.classList.add("-translate-y-2")),this.$store.commit("setTool",t)}},mounted:function(){this.$refs["brush"].$el.classList.remove("-translate-y-2"),this.$refs["brush"].$el.classList.add("-translate-y-5"),this.$refs["pencil"].$el.classList.remove("-translate-y-5"),this.$refs["pencil"].$el.classList.add("-translate-y-2")}}),z=k,C=(o("bb27"),Object(v["a"])(z,u,h,!1,null,"6b65908e",null)),$=C.exports,j=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex pr-10"},[o("v-popover",{attrs:{disabled:t.disabledColor,offset:"16"}},[o("VIconBtn",{attrs:{disabled:t.disabledColor,title:"颜色",color:t.color,name:"color"}}),o("template",{slot:"popover"},[o("CompactPicker",{model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)],2)],1)},x=[],O=o("5530"),A=o("c345"),S=o("2f62"),_={components:{VIconBtn:b,CompactPicker:A["Compact"]},data:function(){return{color:"#000000"}},computed:Object(O["a"])(Object(O["a"])({},Object(S["b"])(["toolName"])),{},{toolArgs:function(){return this.$store.state[this.toolName+"Args"]||{}},disabledColor:function(){return null===this.toolName||"eraser"===this.toolName}}),watch:{toolName:function(){this.toolArgs.color&&(this.color=this.toolArgs.color)},color:function(){this.toolArgs.color&&this.$store.commit("setArgs",{toolName:this.toolName,color:this.color.hex8})}}},T=_,N=Object(v["a"])(T,j,x,!1,null,"2169a79e",null),L=N.exports,V=o("d4ec"),M=o("bee2"),B=(o("a434"),o("ac1f"),function(){function t(e){Object(V["a"])(this,t),this.limit=e,this.history=[],this.current=0}return Object(M["a"])(t,[{key:"add",value:function(t){this.history.splice(this.current,this.history.length),this.history.length>=this.limit&&this.history.shift(),this.history.push(t),this.current=this.history.length,localStorage.vdarw=r.a.project.exportJSON()}},{key:"undo",value:function(){this.canUndo()&&this.history[--this.current].unexec()}},{key:"redo",value:function(){this.canRedo()&&this.history[this.current++].exec()}},{key:"canUndo",value:function(){return this.current>0}},{key:"canRedo",value:function(){return this.history.length>this.current}},{key:"clear",value:function(){this.history=[],this.current=0,localStorage.vdarw="[]"}}]),t}()),P=new B(20),I=o("4c17"),E=o.n(I),D=function(t){t||(t=E()());var e=new r.a.Layer({name:t});return r.a.project.addLayer(e),e},J=function(){return r.a.project.clear(),P.clear(),r.a.project},F=o("9b6a"),U={components:{VTools:$,VIconBtn:b,VPicker:L},data:function(){return{history:P}},mounted:function(){Object(F["a"])("ctrl+s",this.exportSvg),Object(F["a"])("f1",this.help)},methods:{clear:function(){J(),D()},undo:function(){P.undo()},redo:function(){P.redo()}}},H=U,R=Object(v["a"])(H,l,c,!1,null,"68e5754c",null),W=R.exports,q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex flex-row bg-white rounded-r-2xl",on:{click:t.handleClick}},[o("img",{staticClass:"pl-6",attrs:{src:"https://raw.githubusercontent.com/chaochaooo/Bio_Sketchbook/main/public/assets/svg/line.svg"}}),t._m(0)])},G=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"flex flex-col justify-between items-center"},[o("div",{staticClass:"pt-6"},[o("p",{staticClass:"dialogue"},[o("span",[t._v("Hello dear friend! Can you draw my outline ?")])])]),o("img",{staticClass:"p-12",attrs:{src:"https://raw.githubusercontent.com/chaochaooo/Bio_Sketchbook/main/public/assets/svg/len.svg"}})])}],K={methods:{handleClick:function(t){this.$emit("click",t)}}},Q=K,X=(o("dbf1"),Object(v["a"])(Q,q,G,!1,null,"121fa6ac",null)),Y=X.exports,Z=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},tt=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content-wrapper filter drop-shadow-md"},[o("p",{staticClass:"content"},[o("span",[t._v("I am Rhododendron, found mainly in Asia. Most species have brightly colored flowers which bloom from late winter through to early summer.")])])])}],et={},ot=et,st=(o("06ef"),Object(v["a"])(ot,Z,tt,!1,null,"7b0bdd1b",null)),nt=st.exports,rt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{on:{click:t.handleClick}},[t._m(0)])},at=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("i",[o("img",{attrs:{src:"https://raw.githubusercontent.com/chaochaooo/Bio_Sketchbook/main/public/assets/svg/next.svg"}})])}],it={methods:{handleClick:function(t){this.$emit("click",t)}}},lt=it,ct=Object(v["a"])(lt,rt,at,!1,null,"c2c9f876",null),ut=ct.exports,ht=o("2909"),ft=function(){function t(e){var o=e.path;Object(V["a"])(this,t),this._args={path:o},o.name=E()()}return Object(M["a"])(t,[{key:"exec",value:function(){var t;this.removed&&(t=this._args.path).add.apply(t,Object(ht["a"])(this.removed))}},{key:"unexec",value:function(){this.removed=this._args.path.removeSegments()}}]),t}(),dt={path:null,show:null},pt={lastSize:0,lastColor:"#00000FF"},mt=function(t){dt.show&&dt.show.layer===r.a.project.activeLayer&&pt.lastSize===Ht.state.pencilArgs.size&&pt.lastColor===Ht.state.pencilArgs.color||(dt.show&&dt.show.remove(),dt.show=null,dt.show=new r.a.Path.Circle({center:[0,0],radius:Ht.state.pencilArgs.size/2,fillColor:Ht.state.pencilArgs.color}),pt.lastSize=Ht.state.pencilArgs.size,pt.lastColor=Ht.state.pencilArgs.color),dt.show.position=t.point},vt=function(t){dt.path=new r.a.Path,dt.path.strokeColor=Ht.state.pencilArgs.color,dt.path.strokeWidth=Ht.state.pencilArgs.size,dt.path.strokeCap="round",dt.path.strokeJoin="round",dt.path.add(t.point)},gt=function(t){dt.path&&dt.path.add(t.point)},bt=function(t){dt.path.add(t.point),Ht.state.pencilArgs.shake&&dt.path.simplify(),P.add(new ft({path:dt.path})),dt.path=null,dt.show&&dt.show.remove(),dt.show=null},wt=function(){},yt=function(){dt.show&&dt.show.remove(),dt.show=null},kt=new r.a.Tool;kt.onMouseDown=vt,kt.onMouseDrag=gt,kt.onMouseUp=bt,kt.onMouseMove=mt,kt.onToggleIn=wt,kt.onToggleOut=yt;var zt={path:null,show:null},Ct={lastSize:0},$t=function(t){zt.show&&zt.show.layer===r.a.project.activeLayer&&Ct.layer===Ht.state.eraserArgs.size||(zt.show&&zt.show.remove(),zt.show=null,zt.show=new r.a.Path.Circle({center:[0,0],radius:Ht.state.eraserArgs.size/2,strokeColor:"black",fillColor:"white"}),Ct.lastSize=Ht.state.eraserArgs.size),zt.show.position=t.point},jt=function(t){zt.path=new r.a.Path,zt.path.strokeColor="white",zt.path.strokeWidth=Ht.state.eraserArgs.size,zt.path.blendMode="destination-out",zt.path.strokeCap="round",zt.path.strokeJoin="round",zt.path.add(t.point)},xt=function(t){zt.show&&(zt.show.position=t.point,zt.show.bringToFront()),zt.path&&zt.path.add(t.point)},Ot=function(t){zt.path.add(t.point),P.add(new ft({path:zt.path})),zt.path=null},At=function(){},St=function(){zt.show&&zt.show.remove(),zt.show=null},_t=new r.a.Tool;_t.onMouseDown=jt,_t.onMouseDrag=xt,_t.onMouseUp=Ot,_t.onMouseMove=$t,_t.onToggleIn=At,_t.onToggleOut=St;var Tt={prevSelection:null};function Nt(){if(Tt.prevSelection){var t=Tt.prevSelection.path||Tt.prevSelection;t.bounds.selected=!1,t.selected=!1,Tt.prevSelection.selected=!1,Tt.prevSelection=null}}var Lt=function(t){Nt();var e=r.a.project.hitTest(t.point,{tolerance:4,fill:!0,stroke:!0,segments:!0}),o=e&&e.item;if(o){var s="segment"===e.type;o.bounds.selected=!s,s&&(o=e.segment),o.selected=!0}Tt.prevSelection=o},Vt=function(){Nt()},Mt=new r.a.Tool;Mt.onMouseDown=Lt,Mt.onToggleOut=Vt;var Bt={path:null,carryLength:0},Pt=function(){Bt.path=new r.a.Path,Bt.path.fillColor=Ht.state.brushArgs.color},It=function(t){if(Bt.path&&t.delta.length>1){var e=t.delta;e.angle=e.angle+90;var o=e.normalize().multiply(Ht.state.brushArgs.size).multiply(1/e.length),s=t.middlePoint.add(o),n=t.middlePoint.subtract(o);Bt.carryLength=Bt.carryLength+e.length,Bt.carryLength>o.length&&(Bt.path.add(s),Bt.path.insert(0,n),Bt.path.smooth(),Bt.carryLength=0)}},Et=function(){Ht.state.brushArgs.shake&&Bt.path.simplify(),P.add(new ft({path:Bt.path})),Bt.path=null},Dt=function(){},Jt=function(){},Ft=new r.a.Tool;Ft.onMouseDown=Pt,Ft.onMouseDrag=It,Ft.onMouseUp=Et,Ft.onToggleIn=Dt,Ft.onToggleOut=Jt;var Ut={pencil:kt,eraser:_t,select:Mt,brush:Ft};s["default"].use(S["a"]);var Ht=new S["a"].Store({state:{toolName:null,canvasArgs:{bgColor:"#fff"},pencilArgs:{color:"#000000",size:10,shake:!0},eraserArgs:{size:20},brushArgs:{color:"#000000",size:20,shake:!0}},mutations:{setTool:function(t,e){t.toolName&&Ut[t.toolName].onToggleOut&&Ut[t.toolName].onToggleOut(),t.toolName=e,Ut[e]&&(Ut[e].activate(),Ut[e].onToggleIn&&Ut[e].onToggleIn())},setArgs:function(t,e){var o=e.toolName,s=e.color,n=e.size,r=e.shake,a=t[o+"Args"];a.color=s||a.color,a.size=n||a.size,void 0!==r&&(a.shake=r)},setCanvasArgs:function(t,e){Object.assign(t.canvasArgs,e)}},actions:{},modules:{}}),Rt=function(t){Object(F["a"])("b",(function(){return Ht.commit("setTool","brush")})),Object(F["a"])("p",(function(){return Ht.commit("setTool","pencil")})),Object(F["a"])("e",(function(){return Ht.commit("setTool","eraser")})),Object(F["a"])("a",(function(){return Ht.commit("setTool","select")})),Object(F["a"])("ctrl+z",(function(){return P.undo()})),Object(F["a"])("ctrl+shift+z",(function(){return P.redo()})),Object(F["a"])("ctrl+q",(function(){J(),D()}))},Wt=function(t){r.a.setup(t.canvas),r.a.tool=null,Rt(t),document.getElementById("canvas").addEventListener("wheel",(function(e){t.vdrawArgs.zoom=r.a.view.zoom})),r.a.project.importJSON(window.localStorage.vdarw||[]),t.vdrawArgs.size=r.a.view.size,t.vdrawArgs.zoom=r.a.view.zoom,t.isInit=!0},qt={components:{VHeader:W,VDialogue:Y,VContent:nt,VNext:ut},data:function(){return{isInit:!1,vdrawArgs:{size:{width:0,height:0},zoom:0}}},methods:{toggleSideBar:function(){this.$refs["sidebar"].$el.classList.toggle("-translate-x-44")}},computed:{cursor:function(){var t=this.$store.state.toolName;return null===t||"brush"===t?"cursor: auto;":"select"!==t?"cursor: none;":"cursor: auto;"},canvasBg:function(){return"background-color: ".concat(this.$store.state.canvasArgs.bgColor,"fa;")},canvas:function(){return this.$refs.canvas}},mounted:function(){Wt(this),this.$store.commit("setTool","pencil")},filters:{toFixed:function(t){return t.toFixed(2)}}},Gt=qt,Kt=(o("034f"),Object(v["a"])(Gt,a,i,!1,null,null,null)),Qt=Kt.exports,Xt=o("e37d");o("b972");r.a.install(window),s["default"].prototype.$store=Ht,s["default"].config.productionTip=!1,s["default"].use(Xt["a"]);e["default"]=new s["default"]({store:Ht,render:function(t){return t(Qt)}}).$mount("#app")},"85ec":function(t,e,o){},"998e":function(t,e,o){},"9fed":function(t,e,o){},bb27:function(t,e,o){"use strict";var s=o("9fed"),n=o.n(s);n.a},dbf1:function(t,e,o){"use strict";var s=o("998e"),n=o.n(s);n.a}});
//# sourceMappingURL=app.bb1c4831.js.map